# Portfolio_Dx11_GR

김민혁의 포트폴리오용 Repository 입니다.

리소스가 포함되어 있지 않아 제대로 작동하지 않을 가능성이 높으며, 코드 공개를 위한 Repository 입니다. 

참고하여 만든 작품은 GhostRunner 라는 작품입니다.

![image](https://github.com/user-attachments/assets/7b07148c-733c-4ab6-8c73-db9b03443951)

<hr/>

---

## 링크  
[Ghost Runner 프로젝트 데모 영상](https://www.youtube.com/watch?v=e-euy_yL7h0)

---

# Extend Library Dependancy

> PhysX 5.3  
> FMOD  
> Assimp 5.3.1  
> Imgui  
> Imguizmo
> Effects11  
> DirectXTK  
> DirectMath  

<hr/>

# DX11 모작 포트폴리오: Ghost Runner

- **프로젝트명:** DX11 모작 포트폴리오 [Ghost Runner]  
- **기간:** 2024.06 ~ 2024.08  
- **팀 프로젝트 여부:** X  
- **기술 스택:**  
  C, C++, STL, FMOD, Win API, OpenCV, DLL, DirectX 11, vcpkg, HLSL, Effects11, Assimp, ImGui, ImGuizmo, DirectXTK, DirectMath, Nvidia PhysX 5.3 , DLL
- **IDE:** Visual Studio  

---

## 목적 및 설명
DirectX 11을 이용해 제작하였고 FPS 와이어 액션 게임 *Ghost Runner*의 기본 조작 및 액션, 스테이지 구성, 보스 제작 등을 개발 전반을 진행한 개인 프로젝트입니다.  
상용 엔진을 사용하지 않고 엔진 부분을 직접 DLL로 작업하여 클라이언트와 엔진을 분리하는 방식으로 개발했습니다.

---

## 주요 구현 기능

### 1. **멀티스레딩을 통한 로딩 최적화**  
   - 게임 로딩 속도를 단축하기 위해 멀티스레딩 로드를 구현했습니다.  
   - 리소스를 별도의 스레드에서 로드하고, 메인 스레드가 초기화 작업을 병렬로 처리하도록 구성하여 로딩 시간을 크게 줄였습니다.

### 2. **오브젝트 풀링을 이용한 투사체 최적화**  
   - 반복적으로 생성 및 소멸되는 오브젝트를 효율적으로 관리하기 위해 오브젝트 풀링(Object Pooling) 기법을 적용했습니다.  
   - 이를 통해 메모리 할당과 해제를 최소화하고 성능을 개선했습니다.

### 3. **멀티 렌더 타겟과 Deferred 쉐이더 처리 기법**  
   - 여러 렌더 타겟과 Deferred Shading 기술을 활용하여 조명, 그림자, Glow, Blur 등의 후처리 효과를 구현했습니다.  
   - 더블 버퍼링 기법을 적용해 렌더 타겟 개수를 줄이고 메모리 성능을 최적화했습니다.

### 4. **PhysX와 직접 구현한 물리 엔진**  
   - NVIDIA PhysX를 활용하여 복잡한 메쉬 기반 충돌 처리를 구현했습니다.  
   - 직접 설계한 물리 엔진으로 캐릭터와 환경 간의 상호작용 요소를 추가했습니다.

### 5. **메쉬 데이터 직렬화를 통한 최적화**  
   - 메쉬 데이터를 이진 직렬화하여 파일 크기를 줄이고, 로드 시간을 단축했습니다.  
   - 대규모 스테이지 로딩 시 지연 시간을 효과적으로 감소시켰습니다.

### 6. **몬스터 상태 제어 및 관리**  
   - 상태 머신(State Machine)을 설계하여 몬스터의 이동, 공격, 피격, 사망 상태를 체계적으로 관리했습니다.  
   - 다양한 행동 전환을 자연스럽게 구현하며, 난이도 조절 기능을 추가했습니다.

### 7. **ImGui 기반 맵 에디터**  
   - ImGui를 활용한 맵 에디터를 개발하여 스테이지 오브젝트 배치와 조명 설정(정광원, 방향성 광원)을 직관적으로 조정할 수 있었습니다.

### 8. **사운드 랜덤 재생 시스템**  
   - 사운드 랜덤 재생 시스템을 구축하여 플레이어 몰입도를 강화했습니다.  
   - 유사한 사운드를 무작위로 재생해 반복 효과음을 방지했습니다.

### 9. **플레이어 제어**  
   - 벽 타기, 대쉬, 해킹 등 스킬 구현.  
   - 불릿 타임 기능을 추가하여 투사체를 피하거나 패링할 수 있게 설계했습니다.  
   - 점프, 슬라이딩 등 다양한 물리 계산 및 Quake식 가속을 활용해 속도감을 높였습니다.  
   - 소드 트레일 효과를 통해 검 휘두를 때 궤적을 표현했습니다.

---

## 트러블슈팅

### 1. **맵 로딩 최적화**  
- 초기 맵 로딩 시간이 30분에 달하는 문제가 있었습니다.  
- **이진 직렬화**: 메쉬 데이터를 직렬화하여 로딩 시간을 15분으로 단축.  
- **멀티스레딩**: 본 생성, 머티리얼 로딩을 병렬로 처리하고 뮤텍스로 오류를 방지하며 로딩 시간을 5분으로 단축.  
- **중복 텍스처 방지**: 텍스처 이름을 고유화하고 주소 참조 방식을 변경해 최종 로딩 시간을 40초로 단축.

### 2. **와이어 액션 구현**  
- 기본 직선 운동 대신 포물선 운동과 중간 대쉬를 결합한 복잡한 물리 동작을 구현.  
- Wire State를 출발 가속, 원점 도착, 감속 도착으로 나누어 세밀한 움직임 제어를 가능하게 했습니다.  
- 점프, 슬라이딩과의 물리 공식 차이를 극복하며 사실적인 와이어 액션을 구현했습니다.

---

## 후기
DirectX 11을 활용하여 작업한 첫 개인 포트폴리오입니다.  
화려한 네온사인, 불릿 타임 액션 등 개발 과정 자체가 즐거웠지만, 마지막 한 달 전에 외장 하드 분실로 인해 코드와 리소스를 다시 작업해야 하는 어려움이 있었습니다.  
비록 모든 목표를 달성하지는 못했지만, 물리 액션과 최적화에 많은 공을 들인 만큼 만족스러운 결과물을 얻을 수 있었습니다.

